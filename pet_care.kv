from kivy.app import App
from kivy.uix.screenmanager import ScreenManager, Screen
from kivy.uix.floatlayout import FloatLayout
from kivy.uix.image import Image
from kivy.uix.label import Label
from kivy.uix.button import Button
from kivy.uix.textinput import TextInput
from kivy.clock import Clock
from kivy.animation import Animation

class SignInScreen(Screen):
    def __init__(self, **kwargs):
        super(SignInScreen, self).__init__(**kwargs)

        # Create a FloatLayout to hold the elements
        self.layout = FloatLayout()

        # Background image
        self.background_image = Image(
            source="C:/pet_care_app/back.jpeg",  # Replace with your actual image path
            allow_stretch=True,
            keep_ratio=False,
            size_hint=(1, 1),
            pos_hint={"x": 0, "y": 0}
        )
        self.layout.add_widget(self.background_image)

        # Title Label
        self.title_label = Label(
            text="Pet Care Assistant",
            font_size: 60,
            color=(1, 1, 1, 1),
            halign="center",
            size_hint=(None, None),
            size=(300, 100),
            pos_hint={"center_x": 0.5, "center_y": 0.7}
        )
        self.layout.add_widget(self.title_label)

        # Buttons Layout
        self.buttons_layout = FloatLayout(
            size_hint=(None, None),
            size=(200, 100),
            pos_hint={"right": 1, "top": 1}  # Position buttons in top-right corner
        )
        self.layout.add_widget(self.buttons_layout)

        # Home Button
        self.home_button = Button(
            text="Home",
            size_hint=(None, None),
            size=(100, 50),
            pos_hint={"right": 1, "top": 1},
            background_color=(0, 0, 0, 0)  # Transparent background
        )
        self.buttons_layout.add_widget(self.home_button)

        # Login Button
        self.login_button = Button(
            text="Login",
            size_hint=(None, None),
            size=(100, 50),
            pos_hint={"right": 1, "top": 0.5},
            background_color=(0.2, 0.5, 0.8, 1)
        )
        self.buttons_layout.add_widget(self.login_button)

        # Set the layout for the screen
        self.add_widget(self.layout)

        # Start the image animation
        self.animate_image()

    def animate_image(self):
        # Define the animation properties
        anim = Animation(opacity=0, duration=1) + Animation(opacity=1, duration=1)
        anim.repeat = True
        anim.start(self.background_image)

    def switch_to_login(self, instance):
        self.manager.current = "login"

class LoginScreen(Screen):
    # ... (Your LoginScreen code) ...

class SignUpScreen(Screen):
    # ... (Your SignUpScreen code) ...

class PetCareApp(App):
    def build(self):
        sm = ScreenManager()
        sm.add_widget(SignInScreen(name="signin"))
        sm.add_widget(LoginScreen(name="login"))
        sm.add_widget(SignUpScreen(name="signup"))
        return sm

if __name__ == "__main__":
    PetCareApp().run()